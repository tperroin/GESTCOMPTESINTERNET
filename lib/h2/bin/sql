;              
CREATE USER IF NOT EXISTS SA SALT '04c988d28a83dfcf' HASH '155a0f3286948e496d0df21e92e9d12b79354ca2b0fc2c512a5365ea1a6d830f' ADMIN;            
CREATE CACHED TABLE PUBLIC.MOTIF(
    ID INTEGER NOT NULL,
    LIBELLE VARCHAR(255) NOT NULL,
    RECETTEDEPENSE BOOL NOT NULL
);              
ALTER TABLE PUBLIC.MOTIF ADD CONSTRAINT PUBLIC.CONSTRAINT_4 PRIMARY KEY(ID);   
-- 15 +/- SELECT COUNT(*) FROM PUBLIC.MOTIF;   
INSERT INTO PUBLIC.MOTIF(ID, LIBELLE, RECETTEDEPENSE) VALUES
(1, 'Fournisseurs', TRUE),
(2, 'Salaires', TRUE),
(3, STRINGDECODE('Charges imp\u00f4ts'), TRUE),
(4, 'Emprunt', TRUE),
(5, 'Restaurant', TRUE),
(6, 'B9/B4', TRUE),
(7, 'Dons/Pubs', TRUE),
(8, 'Frais bancaires', TRUE),
(9, 'Rachat parts', TRUE),
(10, 'Assurances', TRUE),
(11, STRINGDECODE('Carte J\u00e9r\u00f4me'), TRUE),
(12, 'Carburants chantiers', TRUE),
(13, 'Parts', FALSE),
(14, 'Remboursement', FALSE),
(15, STRINGDECODE('R\u00e8glements clients'), FALSE); 
CREATE CACHED TABLE PUBLIC.ETAT(
    ID BIGINT NOT NULL,
    LIBELLE VARCHAR(255) NOT NULL
);  
ALTER TABLE PUBLIC.ETAT ADD CONSTRAINT PUBLIC.CONSTRAINT_2 PRIMARY KEY(ID);    
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.ETAT;     
INSERT INTO PUBLIC.ETAT(ID, LIBELLE) VALUES
(1, STRINGDECODE('V\u00e9rifi\u00e9')),
(2, STRINGDECODE('Termin\u00e9'));         
CREATE CACHED TABLE PUBLIC.ENREGISTREMENT(
    ID BIGINT NOT NULL,
    ID_LIBELLE BIGINT NOT NULL,
    ID_MODEREGLEMENT SMALLINT NOT NULL,
    ID_COMPTE SMALLINT NOT NULL,
    ID_MOTIF INTEGER NOT NULL,
    ID_ETAT BIGINT NOT NULL,
    RECETTEDEPENSE CHAR(255) NOT NULL,
    DATEENREGISTREMENT VARCHAR NOT NULL,
    MONTANT DECIMAL(30, 2) NOT NULL,
    ANCIENSOLDE DECIMAL(30, 2) NOT NULL,
    NOUVEAUSOLDE DECIMAL(30, 2) NOT NULL,
    DATEFACTURE VARCHAR,
    NUMCHQ VARCHAR,
    ANTICIPATION BOOLEAN,
    ORDRE INT
);        
ALTER TABLE PUBLIC.ENREGISTREMENT ADD CONSTRAINT PUBLIC.CONSTRAINT_C PRIMARY KEY(ID_COMPTE, ID);               
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.ENREGISTREMENT;           
CREATE INDEX PUBLIC.I_FK_ENREGISTREMENT_LIBELLE ON PUBLIC.ENREGISTREMENT(ID_LIBELLE);          
CREATE INDEX PUBLIC.I_FK_ENREGISTREMENT_MODEREGLEMENT ON PUBLIC.ENREGISTREMENT(ID_MODEREGLEMENT);              
CREATE INDEX PUBLIC.I_FK_ENREGISTREMENT_COMPTE ON PUBLIC.ENREGISTREMENT(ID_COMPTE);            
CREATE INDEX PUBLIC.I_FK_ENREGISTREMENT_MOTIF ON PUBLIC.ENREGISTREMENT(ID_MOTIF);              
CREATE INDEX PUBLIC.I_FK_ENREGISTREMENT_ETAT ON PUBLIC.ENREGISTREMENT(ID_ETAT);
CREATE CACHED TABLE PUBLIC.LIBELLE(
    ID BIGINT NOT NULL,
    LIBELLE VARCHAR(255) NOT NULL
);               
ALTER TABLE PUBLIC.LIBELLE ADD CONSTRAINT PUBLIC.CONSTRAINT_3 PRIMARY KEY(ID); 
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.LIBELLE;  
INSERT INTO PUBLIC.LIBELLE(ID, LIBELLE) VALUES
(1, ''),
(2, STRINGDECODE('Frais relev\u00e9 de compte'));      
CREATE CACHED TABLE PUBLIC.MODEREGLEMENT(
    ID SMALLINT NOT NULL,
    LIBELLE VARCHAR(255) NOT NULL
);       
ALTER TABLE PUBLIC.MODEREGLEMENT ADD CONSTRAINT PUBLIC.CONSTRAINT_30 PRIMARY KEY(ID);          
-- 4 +/- SELECT COUNT(*) FROM PUBLIC.MODEREGLEMENT;            
INSERT INTO PUBLIC.MODEREGLEMENT(ID, LIBELLE) VALUES
(1, STRINGDECODE('Pr\u00e9l\u00e8vement')),
(2, 'CHQ'),
(3, 'LCR'),
(4, STRINGDECODE('Remise de ch\u00e8ques'));          
CREATE CACHED TABLE PUBLIC.COMPTE(
    ID SMALLINT NOT NULL,
    LIBELLE VARCHAR(128) NOT NULL,
    SOLDEDEPART DECIMAL(30, 2) NOT NULL
);     
ALTER TABLE PUBLIC.COMPTE ADD CONSTRAINT PUBLIC.CONSTRAINT_7 PRIMARY KEY(ID);  
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.COMPTE;   
INSERT INTO PUBLIC.COMPTE(ID, LIBELLE, SOLDEDEPART) VALUES
(1, 'CIC Ouest', 0.00),
(2, STRINGDECODE('Cr\u00e9dit Mutuel'), 0.00);              
ALTER TABLE PUBLIC.ENREGISTREMENT ADD CONSTRAINT PUBLIC.CONSTRAINT_C6 FOREIGN KEY(ID_LIBELLE) REFERENCES PUBLIC.LIBELLE(ID) NOCHECK;           
